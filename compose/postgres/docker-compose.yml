version: "3.4"
volumes:
  pg-data:
    external: true
  pg-admin-data:
    external: true
networks:
  pg-net:
services:
  pg:
    image: postgres:11.2-alpine
    restart: always
    volumes:
      - pg-data:/var/lib/postgresql/data
      - <<backups path>>:/var/lib/postgresql/backups
    environment:
      POSTGRES_PASSWORD: 123
    ports:
      - 8002:5432
    networks:
      - pg-net

  pgadmin:
    image: dpage/pgadmin4
    restart: always
    ports:
      - 8003:80
    volumes:
      - pg-admin-data:/var/lib/pgadmin
      - <<backups path>>:/var/lib/pgadmin/storage/admin/backups
    environment:
      PGADMIN_DEFAULT_EMAIL: <<email>>@gmail.com
      PGADMIN_DEFAULT_PASSWORD: 123
    networks:
      - pg-net
